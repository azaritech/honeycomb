<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/grid/index.js | honeycomb-grid</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Create hexagon grids easily. Written in javascript."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="honeycomb-grid"><meta property="twitter:description" content="Create hexagon grids easily. Written in javascript."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/flauwekeul/honeycomb"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-COMPASS_DIRECTION">COMPASS_DIRECTION</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#grid">grid</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-get">get</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-hexesBetween">hexesBetween</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setFactory">setFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-grid">grid</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#hex">hex</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-extendHexFactory">extendHexFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cartesianToCube">cartesianToCube</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-coordinates">coordinates</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cube">cube</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cubeToCartesian">cubeToCartesian</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-distance">distance</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-equalsFactory">equalsFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-height">height</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isFlat">isFlat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isPointy">isPointy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nudge">nudge</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-oppositeCornerDistance">oppositeCornerDistance</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-oppositeSideDistance">oppositeSideDistance</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toString">toString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-width">width</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-thirdCoordinate">thirdCoordinate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DIAGONAL_DIRECTION_COORDINATES">DIAGONAL_DIRECTION_COORDINATES</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DIRECTION_COORDINATES">DIRECTION_COORDINATES</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EPSILON">EPSILON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-OFFSET">OFFSET</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ORIENTATION">ORIENTATION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-staticMethods">staticMethods</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-hex">hex</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#point">point</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-PointFactory">PointFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addFactory">addFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-divideFactory">divideFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-multiplyFactory">multiplyFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-subtractFactory">subtractFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-point">point</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/grid/index.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import { isArray } from &apos;axis.js&apos;

import { ensureXY, signedModulo, compassToNumberDirection } from &apos;../utils&apos;
import PointFactory from &apos;../point&apos;
import Grid from &apos;./class&apos;
import * as statics from &apos;./statics&apos;
import * as methods from &apos;./prototype&apos;

const Point = PointFactory({ ensureXY })

/**
 * @private
 */
export default function defineGridFactory({ extendHex }) {
    /**
     * @function defineGrid
     *
     * @memberof Honeycomb
     * @static
     *
     * @description
     * This function can be used to create {@link Grid} factories by passing it a {@link Hex} factory.
     *
     * @param {Hex} [Hex=Honeycomb.extendHex()] A {@link Hex} factory.
     *                                          If nothing is passed, the default Hex factory is used by calling `Honeycomb.extendHex()` internally.
     *
     * @returns {Grid}                          A Grid factory.
     *
     * @example
     * // create a Grid factory that uses the default Hex Factory:
     * const Grid = Honeycomb.defineGrid()
     * const hex = Grid.Hex()
     * hex.size     // 1
     *
     * // create your own Hex factory
     * const CustomHex = Honeycomb.extendHex({ size: 10, custom: &apos;&#x1F913;&apos; })
     * // &#x2026;and pass it to defineGrid() to create a Grid factory that produces your custom hexes
     * const CustomGrid = Honeycomb.defineGrid(CustomHex)
     * const customHex = CustomGrid.Hex()
     * hex.size     // 10
     * hex.custom   // &#x1F913;
     */
    return function defineGrid(Hex = extendHex()) {
        // static properties
        Object.assign(GridFactory, {
            /**
             * The {@link Hex} factory the Grid factory was created with.
             * @memberof Grid
             * @static
             * @function
             */
            // if Hex isn&apos;t unbound, it&apos;s `this` will reference GridFactory
            Hex: Hex.bind(),

            // methods
            isValidHex: statics.isValidHexFactory({ Grid }),
            pointToHex: statics.pointToHexFactory({ Point, Hex }),
            parallelogram: statics.parallelogramFactory({ Grid, Hex }),
            triangle: statics.triangleFactory({ Grid, Hex }),
            hexagon: statics.hexagonFactory({ Grid, Hex }),
            rectangle: statics.rectangleFactory({ Grid, Hex, compassToNumberDirection, signedModulo })
        })

        // prototype properties
        Object.assign(
            Grid.prototype,
            {
                // methods
                get: methods.get,
                hexesBetween: methods.hexesBetween,
                neighborsOf: methods.neighborsOfFactory({ Grid, signedModulo, compassToNumberDirection }),
                set: methods.setFactory({ Grid })
            }
        )

        /**
         * @function Grid
         *
         * @description
         * A function to create hex {@link grid}s and perform various operations on them.
         *
         * A Grid factory has several static methods that return {@link grid}s of hexes in a certain shape.
         * It can also be called with 1 or more hexes or an array of hexes to construct/clone a {@link grid} containing those hexes.
         *
         * A {@link grid} extends `Array.prototype`, with some methods overwritten and some new methods added.
         *
         * @param {(hex[]|hex)} [arrayOrHex]    An array or a hex. Any invalid hexes are filtered out.
         * @param {...hex} [hexes]              More hexes. Any invalid hexes are filtered out.
         *
         * @returns {grid}                      A grid instance containing only valid hexes.
         *
         * @example
         * const Grid = Honeycomb.defineGrid()
         * // the Hex factory used by the Grid to produce hexes is available as a property
         * const Hex = Grid.Hex
         *
         * Grid(Hex(3, -1), Hex(2, 0))      // [{ x: 3, y: -1 }, { x: 2, y: 0 }]
         * Grid([Hex(3, -1), Hex(2, 0)])    // [{ x: 3, y: -1 }, { x: 2, y: 0 }]
         *
         * // invalid hexes are filtered out:
         * Grid(&apos;no hex&apos;, { x: 3, y: -1 })  // []
         * Grid([&apos;no hex&apos;, Hex(1, -1)])     // [{ x: 1, y: -1 }]
         *
         * // clone a grid:
         * const grid = Grid(Hex(), Hex(1), Hex(2))
         * const clonedGrid = Grid(grid)    // [{ x: 0, y: 0 }, { x: 1, y: 1 }, { x: 2, y: 2 }]
         * grid === clonedGrid              // false
         */
        function GridFactory(arrayOrHex, ...hexes) {
            if (isArray(arrayOrHex)) {
                hexes = arrayOrHex
            } else {
                hexes.unshift(arrayOrHex)
            }

            /**
             * @typedef {Object} grid
             * @extends Array
             *
             * @property {number} length    Amount of hexes in the grid.
             */
            return new Grid(...hexes.filter(Grid.isValidHex))
        }

        return GridFactory
    }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
